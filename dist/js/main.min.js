"use strict";var _createClass=function(){function i(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),e}}();function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}!function(){var e;function n(){_classCallCheck(this,n),this.url="../data/shop.json",this.load(),this.addEvent()}function t(){return e.apply(this,arguments)}new(_createClass(n,[{key:"addEvent",value:function(){var i=this;$(".store").on("click",function(e){var n=e||window.event,t=n.target||n.srcElement;"del"==t.className&&(i.id=t.parentNode.parentNode.parentNode.getAttribute("index"),t.parentNode.parentNode.parentNode.remove(),i.removeCookie())}),$(".store").on("click",function(e){var n=e||window.event,t=n.target||n.srcElement;"left"==t.className&&(i.id=t.parentNode.parentNode.parentNode.getAttribute("index"),1<t.parentNode.children[1].value?t.parentNode.children[1].value--:t.parentNode.children[1].value=1,i.val=t.parentNode.children[1].value,i.updateCookie())}),$(".store").on("click",function(e){var n=e||window.event,t=n.target||n.srcElement;"right"==t.className&&(i.id=t.parentNode.parentNode.parentNode.getAttribute("index"),t.parentNode.children[1].value++,i.val=t.parentNode.children[1].value,i.updateCookie())})}},{key:"updateCookie",value:function(){var t=this,i=0;this.goods.some(function(e,n){return i=n,e.id==t.id})&&(this.goods[i].num=this.val),setCookie("goods",JSON.stringify(this.goods)),this.display()}},{key:"removeCookie",value:function(){var t=this,i=0;this.goods.some(function(e,n){return i=n,e.id==t.id})&&this.goods.splice(i,1),setCookie("goods",JSON.stringify(this.goods))}},{key:"load",value:function(){var n=this;ajax({url:this.url,success:function(e){n.res=JSON.parse(e),n.getCookie()}})}},{key:"getCookie",value:(e=function(){this.goods=getCookie("goods")?JSON.parse(getCookie("goods")):[],this.display()},t.toString=function(){return e.toString()},t)},{key:"selectAll",value:function(){$("#selectall").on("click",function(){1==this.checked?$(".selectone").prop("checked",!0):$(".selectone").prop("checked",!1)}),this.allPrice($("#selectall")),$(".selectone").on("click",function(){$(".selectone").length==$(".selectone:checked").length?$("#selectall").prop("checked",!0):$("#selectall").prop("checked",!1)}),this.allPrice($(".selectone"))}},{key:"allPrice",value:function(e){var l=this,r=document.querySelectorAll(".selectone");e.on("click",function(){for(var e=[],n=l.sum=0;n<$(".selectone").length;n++)if($(".selectone")[n].checked){var t=$(".selectone").eq(n).parent().parent().attr("index"),i=r[n].parentNode.parentNode.children[1].children[0].children[0].src,o=r[n].parentNode.parentNode.children[1].children[1].children[0].innerHTML,s=r[n].parentNode.parentNode.children[2].children[1].children[1].value,a=r[n].parentNode.parentNode.children[2].children[0].innerHTML.replace("￥","");e.push({id:t,img:i,name:o,price:a,num:s}),$.cookie("order",JSON.stringify(e)),console.log($(".selectone")[n].checked),l.sum+=parseInt(r[n].parentNode.nextElementSibling.nextElementSibling.children[2].innerHTML.replace("￥",""))}$(".sum p span i").html(l.sum)})}},{key:"display",value:function(){for(var e="",n=0;n<this.res.length;n++)for(var t=0;t<this.goods.length;t++)if(this.res[n].id==this.goods[t].id){var i=this.goods[t].num*this.res[n].price;e+='<div class="goods" index="'+this.goods[t].id+'">\n                                    <span class="span-box">\n                                        <input class="selectone" type="checkbox">\n                                    </span>\n                                    <a class="goods-a" href="#">\n                                        <div class="goods-img fl">\n                                            <img src="'+this.res[n].img+'" alt="">\n                                        </div>\n                                        <div class="goods-txt fl">\n                                            <p>'+this.res[n].name+'</p>\n                                        </div>\n                                    </a>\n                                    <ul class="fr">\n                                        <li>￥'+this.res[n].price+'</li>\n                                        <li>\n                                            <span class="left">-</span>\n                                            <input type="text" value="'+this.goods[t].num+'" readonly>\n                                            <span class="right">+</span>\n                                        </li>\n                                        <li>￥'+i+'</li>\n                                        <li><a class="del" href="javascript:;">删除</a></li>\n                                    </ul>\n                                </div>'}$(".store").html(e),0<this.goods.length?($(".car-empty").stop().hide(),$(".car-goods").stop().show()):($(".car-empty").stop().show(),$(".car-goods").stop().hide()),this.selectAll()}}]),n),$(".goods-sum .pay").on("click",function(){window.location.href="order.html"})}(),function(){$(".close").on("click",function(){$(".header-top").stop().slideUp(500)}),$(".ser").find("a").eq(1).hover(function(){$(".slideBox").stop().slideDown(300)},function(){$(".slideBox").stop().slideUp(300)}),$(".slideBox").hover(function(){$(".slideBox").stop().slideUp(300).stop().show()},function(){$(".slideBox").stop().slideUp(300)}),$(".sb-left input").on("focus",function(){$(".slideBox1").stop().show()}),$(".sb-left input").on("blur",function(){$(".slideBox1").stop().hide()}),$(".banner").fade({img:$(".banner").find(".image").find("img"),prev:$(".banner").find(".btn").find(".prev"),next:$(".banner").find(".btn").find(".next"),points:$(".banner").find(".points"),autoplay:!0,current:0,delay:4e3,duration:500}),window.onscroll=function(){if(204<document.documentElement.scrollTop){$(".index-nav").css({position:"fixed",left:"0",top:"0",zIndex:99999}),$(".nav .hidden").css("display","block"),$(".nav .list-h").find("span").empty();var e=$('<img src="../assets/img/logo-s.jpg">');$(".nav .list-h").find("span").append(e)}else{$(".index-nav").css({position:"relative",left:"0",top:"0"}),$(".nav .hidden").css("display","none"),$(".nav .list-h").find("span").empty();$(".nav .list-h").find("span").append("全部内容")}};for(var e=function(e){$(".main .main1").find("a").eq(e).hover(function(){$(".main .main1").find("a").eq(e).find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".main .main1").find("a").eq(e).find("img").css({transition:"1s",transform:"scale(1)"})})},n=0;n<$(".main .main1").find("a").length;n++)e(n);$(".spec1 .show .show-a").hover(function(){$(".spec1 .show .show-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".show .show-a").find("img").css({transition:"1s",transform:"scale(1)"})}),$(".show-banner").banner({img:$(".show-banner").find("ul").find("li"),prev:$(".show-banner .btn .prev"),next:$(".show-banner .btn .next"),autoplay:!0,current:0,delay:5e3,duration:500}),$(".discount").fade({img:$(".discount").find("a"),prev:$(".discount").find(".btn").find(".prev"),next:$(".discount").find(".btn").find(".next"),points:$(".discount").find(".points"),autoplay:!0,current:0,delay:4e3,duration:500}),$(".spec2 .hot-sale .hot-sale-a").hover(function(){$(".spec2 .hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1)"})}),$(".main4-banner").banner2({img:$(".main4-banner").find("ul").find("li"),prev:$(".main4-banner .btn .prev"),next:$(".main4-banner .btn .next"),current:0,delay:5e3,duration:500}),$(".main4 .show .show-a").hover(function(){$(".main4 .show .show-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".show .show-a").find("img").css({transition:"1s",transform:"scale(1)"})}),$(".main5 .hot-sale .hot-sale-a").hover(function(){$(".main5 .hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1)"})}),$(".main6 .hot-sale .hot-sale-a").hover(function(){$(".main6 .hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1)"})}),$(".main7 .hot-sale .hot-sale-a").hover(function(){$(".main7 .hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".main7 .hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1)"})});var t=function(e){$(".main7 .hot-sale .hot-sale-img li").eq(e).hover(function(){$(".main7 .hot-sale .hot-sale-img li").eq(e).find(".li-content").stop().slideDown(300)},function(){$(".li-content").stop().slideUp(100)})};for(n=0;n<12;n++)t(n);var i=$(".main7").find(".m7-banner").find(".hot-sale"),o=$(".main7 .btn .prev"),s=$(".main7 .btn .next"),a=0,l=i.length;function r(e){i.eq(e).stop().show().siblings().stop().hide(),$(".main7 .title ul").find("li").eq(e).addClass("active").siblings().removeClass("active")}s.on("click",function(){++a===l&&(a=0),r(a)}),o.on("click",function(){-1===--a&&(a=l-1),r(a)}),$(".main7 .title ul").find("li").on("mouseenter",function(){r(a=$(this).index())});var c=$(".main8").find(".main8-banner").find(".img"),d=$(".main8 .btn .prev"),h=$(".main8 .btn .next"),u=0,f=c.length;function p(e){c.eq(e).stop().show().siblings().stop().hide(),$(".main8 .title ul").find("li").eq(e).addClass("active").siblings().removeClass("active")}h.on("click",function(){++u===f&&(u=0),p(u)}),d.on("click",function(){-1===--u&&(u=f-1),p(u)}),$(".main8 .title ul").find("li").on("mouseenter",function(){p(u=$(this).index())}),$(".main9 .hot-sale .hot-sale-a").hover(function(){$(".main9 .hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1.2)"})},function(){$(".hot-sale .hot-sale-a").find("img").css({transition:"1s",transform:"scale(1)"})});var m=function(e){$(".main10 .hot-sale").find("a").eq(e).hover(function(){$(".main10 .hot-sale").find("a").eq(e).find("img").css({transition:"1s",transform:"scale(1.1)"})},function(){$(".main10 .hot-sale").find("a").eq(e).find("img").css({transition:"1s",transform:"scale(1)"})})};for(n=0;n<$(".main10 .hot-sale").find("a").length;n++)m(n);var g=function(e){$(".main11 .hot-sale").find("a").eq(e).hover(function(){$(".main11 .hot-sale").find("a").eq(e).find("img").css({transition:"1s",transform:"scale(1.1)"})},function(){$(".main11 .hot-sale").find("a").eq(e).find("img").css({transition:"1s",transform:"scale(1)"})})};for(n=0;n<$(".main11 .hot-sale").find("a").length;n++)g(n);getCookie("user")&&getCookie("password")&&($.cookie("isLogin",!0),$.cookie("isLogin")&&($(".sign-ready").html("退出"),$(".header-bottom .sign-logon").html(getCookie("user"))),$(".sign-ready").on("click",function(){$.cookie("isLogin",!1),$(".header-bottom .sign-ready").html("请登录"),$(".header-bottom .sign-logon").html("注册即送3500元大礼包")}))}(),function(){var t=!1,i=!1,o=!1,s=!1,a=document.getElementById("txt1"),n=document.getElementById("txt2"),l=document.getElementById("txt3"),e=document.getElementById("txt4"),r=(document.getElementById("register"),document.querySelector(".content div:nth-child(1) i")),c=document.querySelector(".content div:nth-child(2) i"),d=document.querySelector(".content div:nth-child(3) i"),h=document.querySelector(".content div:nth-child(4) i");document.querySelector(".content div:nth-child(5) i");$("#txt1").on("blur",function(){var e=a.value;/^1\d{10}$/.test(e)?(t=!0,r.style.display="none"):(r.style.display="block",t=!1)}),$("#txt1").on("focus",function(){r.style.display="none"}),$("#txt2").on("blur",function(){var e=n.value;i=!!/^\d{6}$/.test(e)||!(c.style.display="block")}),$("#txt2").on("focus",function(){c.style.display="none"}),$("#txt3").on("blur",function(){var e=l.value;o=!!/^[\w-]{6,20}$/.test(e)||!(d.style.display="block")}),$("#txt3").on("focus",function(){d.style.display="none"}),$("#txt4").on("blur",function(){s=e.value===l.value||!(h.style.display="block")}),$("#txt4").on("focus",function(){h.style.display="none"}),$("#register").on("click",function(){if(t&&i&&o&&s){var e=a.value,n=l.value;$.cookie("user",e),$.cookie("password",n),window.location.href="sign.html"}else alert("提交失败")})}(),function(){$(".add-address").on("click",function(){$(".address").stop().show()});var l=[];function e(){_classCallCheck(this,e),this.url="../data/shop.json",this.load(),this.addEvent()}$(".address .save").on("click",function(){$(".address").stop().hide();for(var e=0;e<4;e++)if(!$(".address input").eq(e).val())return alert("请输入完整信息");var n=$(".address input").eq(0).val(),t=$(".address input").eq(1).val(),i=$(".address input").eq(2).val(),o=$(".address input").eq(3).val();l.push({name:n,tel:t,ad:i,sad:o}),$.cookie("adds",JSON.stringify(l));var s=$.cookie("adds")?JSON.parse($.cookie("adds")):[],a="";s.forEach(function(e,n){a="<li class='checked'>\n                            <p>"+s[n].name+"</p>\n                            <p>"+s[n].tel+"</p>\n                            <p>"+s[n].ad+s[n].sad+"</p>\n                        </li>"}),$(".box-top ul").append(a)}),new(_createClass(e,[{key:"addEvent",value:function(){var i=this;$(".order-store").on("click",function(e){var n=e||window.event,t=n.target||n.srcElement;console.log(t),"del"==t.className&&(console.log(1),i.id=t.parentNode.parentNode.parentNode.getAttribute("index"),t.parentNode.parentNode.parentNode.remove(),i.removeCookie())});var e=0;$(".box-top ul").on("click",".checked",function(){e=0===e?($(".checked").css("border","2px solid red"),1):($(".checked").css("border","1px solid #ddd"),0)}),$(".goods-sum .submit").on("click",function(){1===e?(console.log(i.sum),$.cookie("sum",i.sum),window.location.href="pay.html"):alert("请选择地址")})}},{key:"removeCookie",value:function(){var t=this,i=0;this.order.some(function(e,n){return i=n,e.id==t.id})&&this.order.splice(i,1),setCookie("order",JSON.stringify(this.order)),this.display()}},{key:"load",value:function(){var n=this;ajax({url:this.url,success:function(e){n.res=JSON.parse(e),n.getCookie()}})}},{key:"getCookie",value:function(){console.log($.cookie("order")),this.order=$.cookie("order")?JSON.parse($.cookie("order")):[],this.display()}},{key:"display",value:function(){for(var e="",n=this.sum=0;n<this.res.length;n++)for(var t=0;t<this.order.length;t++)this.res[n].id==this.order[t].id&&(e+='<div class="goods" index="'+this.order[t].id+'">\n                                    <a class="goods-sa" href="#">\n                                        <div class="goods-img fl">\n                                            <img class="small-img" src="'+this.res[n].img+'" alt="">\n                                        </div>\n                                        <div class="goods-txt fl">\n                                            <p>'+this.res[n].name+'</p>\n                                        </div>\n                                    </a>\n                                    <ul class="fr">\n                                        <li>￥'+this.res[n].price+'</li>\n                                        <li>\n                                            <input type="text" value="'+this.order[t].num+'" readonly>\n                                        </li>\n                                        <li>￥'+this.res[n].price+'</li>\n                                        <li><a class="del" href="javascript:;">删除</a></li>\n                                    </ul>\n                                </div>',this.sum+=parseInt(this.res[n].price));$(".sum p span i").html(this.sum),$(".order-store").html(e)}}]),e)}(),function(){var e=$.cookie("sum");$(".money").html(e),$(".pay-g").on("click",function(){$(".input").val()==e?window.location.href="success.html":alert("请输入正确的价格")})}(),function(){for(var e=function(e){$(".detail .s-img li").eq(e).hover(function(){$(".detail .img img").eq(e).stop().show().siblings().stop().hide(),$(".detail .s-img li").eq(e).addClass("active").siblings().removeClass("active")})},n=0;n<$(".detail .s-img li").length;n++)e(n);function t(){this.box=document.querySelector(".detail .img"),this.img=document.querySelector(".detail .img img"),this.init()}$(".button .add").on("click",function(){window.location.href="car.html"}),t.prototype.init=function(){var t=this;$(".detail .img").on("mouseover",function(e){t.show()}),$(".detail .img").on("mouseout",function(){t.hide()}),$(".detail .img").on("mousemove",function(e){var n=e||window.event;t.move(n)})},t.prototype.show=function(){$(".detail .img img").css("transform","scale(2)")},t.prototype.hide=function(){$(".detail .img img").css("transform","scale(1)"),$(".detail .img img").css({left:0,top:0})},t.prototype.move=function(e){var n=e.clientX-this.box.offsetLeft,t=e.clientY-this.box.offsetTop;n<0&&(n=0),n>this.box.offsetWidth&&(n=this.box.offsetWidth),t<0&&(t=0),t>this.box.offsetHeight&&(t=this.box.offsetHeight),$(".detail .img img").css({left:250-e.offsetX+"px",top:250-e.offsetY+"px"})},new t}(),function(){var e;function n(){_classCallCheck(this,n),this.url="../data/shop.json",this.lb=document.querySelector(".list-box"),this.load()}function t(){return e.apply(this,arguments)}new(_createClass(n,[{key:"load",value:function(){var n=this;ajax({url:this.url,success:function(e){n.res=JSON.parse(e),n.display(),n.sortPrice(),n.addEvent()}})}},{key:"sortPrice",value:function(){var e=0,n=this;$(".right-top li .sort").on("click",function(){e=0===e?(n.res.sort(function(e,n){return n.price-e.price}),$(".right-top li .sort").html("价格由高到低"),n.display(),1):(n.res.sort(function(e,n){return e.price-n.price}),$(".right-top li .sort").html("价格由低到高"),n.display(),0)})}},{key:"display",value:function(){for(var e="",n=0;n<this.res.length;n++)e+='<li index="'+this.res[n].id+'">\n                            <a href="#"><img src="'+this.res[n].img+'" alt=""></a>\n                            <div class="content">\n                                <p>\n                                    <em>月付</em>\n                                    <span>'+this.res[n].price1+" </span>\n                                    <span>|￥<i>"+this.res[n].price+'</i></span>\n                                </p>\n                                <a href="#">'+this.res[n].name+'</a>\n                                <span class="sale">'+this.res[n].sale+'</span>\n                                <p>免息分期</p>\n                                <p><a class="add" href="#">加入购物车</a></p>\n                            </div>\n                        </li>';$(".list-box").html(e)}},{key:"addEvent",value:function(){var i=this;$(".list-box").on("click",function(e){var n=e||window.event,t=n.target||n.srcElement;"add"==t.className&&(i.id=t.parentNode.parentNode.parentNode.getAttribute("index"),i.setCookie())}),$(".list-box").on("click","img",function(){window.location.href="shop-content.html"})}},{key:"setCookie",value:(e=function(){if(console.log(1),this.goods=getCookie("goods")?JSON.parse(getCookie("goods")):[],this.goods.length<1)this.goods.push({id:this.id,num:1});else{for(var e=1,n=0;n<this.goods.length;n++)this.goods[n].id===this.id&&(this.goods[n].num++,e=0);1==e&&this.goods.push({id:this.id,num:1})}setCookie("goods",JSON.stringify(this.goods))},t.toString=function(){return e.toString()},t)}]),n)}(),function(){$(".way .span1").on("click",function(){$(".sign-user").stop().show(),$(".sign-ma").stop().hide(),$(".way .span1").addClass("active1").siblings().removeClass("active1")}),$(".way .span2").on("click",function(){$(".sign-user").stop().hide().removeClass("active1"),$(".sign-ma").stop().show().addClass("active1"),$(".way .span2").addClass("active1").siblings().removeClass("active1")});var t=document.querySelector(".sign-user .txt1"),i=document.querySelector(".sign-user .txt2");$("#sub").on("click",function(){var e=t.value,n=i.value;e===getCookie("user")&&n===getCookie("password")?window.location.href="index.html":alert("登录失败，请重新登录")})}(),$(".continue").on("click",function(){window.location.href="shop.html"});